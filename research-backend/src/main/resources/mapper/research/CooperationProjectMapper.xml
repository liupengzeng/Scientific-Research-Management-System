<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.university.research.research.mapper.CooperationProjectMapper">

    <resultMap id="ProjectResult" type="com.university.research.research.domain.CooperationProject">
        <id property="coopProjectId" column="coop_project_id"/>
        <result property="projectNo" column="project_no"/>
        <result property="projectName" column="project_name"/>
        <result property="enterpriseId" column="enterprise_id"/>
        <result property="teacherId" column="teacher_id"/>
        <result property="budget" column="budget"/>
        <result property="status" column="status"/>
        <result property="currentStep" column="current_step"/>
        <result property="createTime" column="create_time"/>
    </resultMap>

    <select id="selectList" resultMap="ProjectResult">
        select coop_project_id, project_no, project_name, enterprise_id, teacher_id, budget, status, current_step, create_time
        from cooperation_project
        <where>
            <if test="q != null">
                <if test="q.projectName != null and q.projectName != ''">
                    and project_name like concat('%', #{q.projectName}, '%')
                </if>
                <if test="q.enterpriseId != null">
                    and enterprise_id = #{q.enterpriseId}
                </if>
                <if test="q.teacherId != null">
                    and teacher_id = #{q.teacherId}
                </if>
                <if test="q.status != null and q.status != ''">
                    and status = #{q.status}
                </if>
            </if>
        </where>
        order by create_time desc, coop_project_id desc
    </select>
</mapper>
